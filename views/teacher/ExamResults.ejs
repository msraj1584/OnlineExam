<%- include('../partials/header', { title: 'Exam Result Details' }) %>
<%- include('../partials/navbar', { user: user }) %>
<div class="container mt-4">
    <main class="content">
       <div class="text-center mb-4">
            <h2 class="text-primary font-weight-bold">Exam: <%= exam.title %></h2>
        </div>
        <a href="/teacher/exam-details" class="btn btn-secondary mb-3 btn-sm">Back to Exam Details</a>
        <% if (results.length === 0) { %>
            <p>No results available for this exam.</p>
        <% } else { %>
            <table class="table table-bordered table-hover cell-border">
                <thead class="thead-dark">
                    <tr>
                        <th style="width: 10%; text-align: center;">#</th>
                        <th>Student Name</th>
                        <th>Score</th>
                        <th>Total Questions</th>
                        <th>Percentage</th>
                        <th style="width: 10%; text-align: center;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% results.forEach((result, index) => { %>
                        <tr>
                            <td style="text-align: center;"><%= index+1%></td>
                            <td><%= result.student.firstName + ' ' + result.student.lastName %></td>
                            <td><%= result.score %></td>
                            <td><%= result.totalQuestions %></td>
                            <td><%= ((result.score / result.totalQuestions) * 100).toFixed(2) %> %</td>
                            <td style="text-align: center;">
                                <a href="/teacher/exam-result-details/<%= result._id %>" class="btn btn-primary">
                                    Details
                                </a>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        <% } %>
    </main>
</div>
<%- include('../partials/footer') %>
